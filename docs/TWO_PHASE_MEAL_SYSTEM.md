# 2λ‹¨κ³„ μ‹μ‚¬ κΈ°λ΅ μ‹μ¤ν… - μ™„μ „ λ¶„λ¦¬

## π“‹ κ°μ”

μ‚¬μ©μ κ²½ν—μ„ κ°μ„ ν•κΈ° μ„ν•΄ μ‹μ‚¬ κΈ°λ΅μ„ **2λ‹¨κ³„ ν”„λ΅μ„Έμ¤**λ΅ μ™„μ „ν λ¶„λ¦¬ν–μµλ‹λ‹¤.

### λ³€κ²½ μ „ (1λ‹¨κ³„ ν†µν•©)
```
μ‚¬μ§„ + μ λ© + μ¥μ† + κ°€κ²© + ν‰μ  + λ©”λ¨ β†’ ν• λ²μ— μ…λ ¥
```
- μ‚¬μ§„ μ΄¬μ ν›„ λ¨λ“  μ •λ³΄λ¥Ό μ¦‰μ‹ μ…λ ¥ν•΄μ•Ό ν•¨
- μ‹μ‚¬ μ „μ— ν‰κ°€λ¥Ό ν•΄μ•Ό ν•λ” λΉ„ν„μ‹¤μ μΈ UX
- λ³µμ΅ν• νΌμΌλ΅ μΈν• μ‚¬μ©μ μ΄νƒ

### λ³€κ²½ ν›„ (2λ‹¨κ³„ λ¶„λ¦¬)
```
1λ‹¨κ³„: μ‚¬μ§„ + μλ™ μ λ© β†’ μ¦‰μ‹ μ €μ¥
2λ‹¨κ³„: ν‰μ  + μ¥μ† + κ°€κ²© + λ©”λ¨ β†’ λ‚μ¤‘μ— ν‰κ°€
```
- μ‹μ‚¬ μ „μ— μ‚¬μ§„λ§ λΉ λ¥΄κ² μ΄¬μν•κ³  μ €μ¥
- μ‹μ‚¬ ν›„ μ—¬μ μκ² ν‰κ°€ μ¶”κ°€
- μ‹¬ν”ν• UXλ΅ μ‚¬μ©μ„± ν–¥μƒ

## π― μ£Όμ” λ³€κ²½μ‚¬ν•­

### 1. λ“±λ΅ νμ΄μ§€ λ‹¨μν™” (`/add`)

**νμΌ**: `frontend/src/app/add/page.tsx`

#### μ κ±°λ ν•„λ“
- β μ¥μ† μ…λ ¥
- β κ°€κ²© μ…λ ¥
- β ν‰μ  μ„ νƒ
- β λ©”λ¨ μ…λ ¥
- β GPS μ„μΉ

#### λ‚¨μ€ ν•„λ“
- β… μ‚¬μ§„ μ—…λ΅λ“ (ν•„μ, μµλ€ 5μ¥)
- β… μ λ© (μλ™ μƒμ„±, μμ • κ°€λ¥)

#### μλ™ μ λ© μƒμ„± λ΅μ§
```typescript
const generateMealName = () => {
  const now = new Date()
  const month = now.getMonth() + 1
  const day = now.getDate()
  const hour = now.getHours()
  
  let mealType = ''
  if (hour >= 5 && hour < 11) {
    mealType = 'μ•„μΉ¨'
  } else if (hour >= 11 && hour < 15) {
    mealType = 'μ μ‹¬'
  } else if (hour >= 15 && hour < 18) {
    mealType = 'κ°„μ‹'
  } else {
    mealType = 'μ €λ…'
  }
  
  return `${month}μ›” ${day}μΌ ${mealType}`
}
```

**μμ‹**:
- μ¤μ „ 8μ‹: "10μ›” 9μΌ μ•„μΉ¨"
- μ¤ν›„ 1μ‹: "10μ›” 9μΌ μ μ‹¬"
- μ¤ν›„ 4μ‹: "10μ›” 9μΌ κ°„μ‹"
- μ¤ν›„ 7μ‹: "10μ›” 9μΌ μ €λ…"

#### UI κ°μ„ 
- ν° μ‚¬μ§„ μ—…λ΅λ“ μμ—­
- λ“λκ·Έ & λ“λ΅­ μ§€μ›
- λ―Έλ¦¬λ³΄κΈ° μΈλ„¤μΌ
- μ‚¬μ§„ κ°λ³„ μ‚­μ  κΈ°λ¥
- μ•λ‚΄ λ©”μ‹μ§€ μ¶”κ°€

### 2. ν‰κ°€ νμ΄μ§€ μ‹ κ· μƒμ„± (`/meal/[id]/evaluate`)

**νμΌ**: `frontend/src/app/meal/[id]/evaluate/page.tsx`

#### ν¬ν•¨ ν•„λ“
- β­ ν‰μ  (1-5μ , ν•„μ)
- π“ μ¥μ† (μ„ νƒ)
- π’° κ°€κ²© (μ„ νƒ)
- π“ λ©”λ¨ (μ„ νƒ, 200μ)
- π—ΊοΈ GPS μ„μΉ (μ„ νƒ)

#### μ£Όμ” κΈ°λ¥
1. **κΈ°μ΅΄ λ°μ΄ν„° λ΅λ“**
   - μ΄λ―Έ ν‰κ°€ν• κ²½μ° κΈ°μ΅΄ κ°’ ν‘μ‹
   - μμ • λ¨λ“λ΅ λ™μ‘

2. **ν‰μ  μ΄λ¨μ§€ ν”Όλ“λ°±**
   ```
   5μ : β­ μµκ³ μμ”!
   4μ : π λ§›μμ–΄μ”
   3μ : π™‚ κ΄μ°®μ•„μ”
   2μ : π λ³„λ΅μμ”
   1μ : π μµμ•…μ΄μ—μ”
   ```

3. **GPS μ„μΉ κ°€μ Έμ¤κΈ°**
   - λ²„νΌ ν΄λ¦­μΌλ΅ ν„μ¬ μ„μΉ μλ™ μ…λ ¥
   - μ—­μ§€μ¤μ½”λ”©μΌλ΅ μ£Όμ† λ³€ν™
   - OpenStreetMap API μ‚¬μ©

4. **μ‹μ‚¬ μ •λ³΄ λ―Έλ¦¬λ³΄κΈ°**
   - μƒλ‹¨μ— μ‚¬μ§„ μΈλ„¤μΌ
   - μ λ© λ° λ“±λ΅ λ‚ μ§ ν‘μ‹

### 3. μƒμ„Έ νμ΄μ§€ κ°νΈ (`/meal/[id]`)

**νμΌ**: `frontend/src/app/meal/[id]/page.tsx`

#### ν‰κ°€ μƒνƒλ³„ UI

**λ―Έν‰κ°€ μƒνƒ**:
```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   [μ‚¬μ§„]                β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ 10μ›” 9μΌ μ €λ…           β”‚
β”‚ 2025.10.09 19:30        β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ β­ μ•„μ§ ν‰κ°€ν•μ§€ μ•μ€    β”‚
β”‚    μ‹μ‚¬μ…λ‹λ‹¤            β”‚
β”‚                          β”‚
β”‚ [ν‰κ°€ν•κΈ° λ²„νΌ]          β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

**ν‰κ°€ μ™„λ£ μƒνƒ**:
```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   [μ‚¬μ§„]                β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ 10μ›” 9μΌ μ €λ…           β”‚
β”‚ 2025.10.09 19:30        β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ ν‰κ°€: β­β­β­β­β­       β”‚
β”‚ π“ ν™λ€ μ΄νƒλ¦¬μ•        β”‚
β”‚ π’° β‚©18,000              β”‚
β”‚ μ •λ§ λ§›μμ—μ–΄μ”!        β”‚
β”‚                          β”‚
β”‚ [ν‰κ°€ μμ •ν•κΈ° λ²„νΌ]     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

#### μ‚¬μ§„ κ°¤λ¬λ¦¬
- μ—¬λ¬ μ¥μ μ‚¬μ§„ μ§€μ›
- μΆμ° μ¤μ™€μ΄ν”„ (λ¨λ°”μΌ)
- μΈλ””μΌ€μ΄ν„° μ μΌλ΅ ν„μ¬ μ„μΉ ν‘μ‹

#### μ‚­μ  κΈ°λ¥
- μ°μΈ΅ μƒλ‹¨ ν΄μ§€ν†µ μ•„μ΄μ½
- ν™•μΈ νμ—… ν‘μ‹

### 4. μΉ΄λ“ μ»΄ν¬λ„νΈ μ—…λ°μ΄νΈ

**νμΌ**: `frontend/src/components/meal-card.tsx`

#### ν‰κ°€ μ λ¬΄ ν‘μ‹
```typescript
{rating && rating > 0 ? (
  <div className="flex items-center">
    {/* λ³„μ  ν‘μ‹ */}
  </div>
) : (
  <span className="text-xs text-gray-400">λ―Έν‰κ°€</span>
)}
```

## π”„ λ°μ΄ν„° νλ¦„

### 1λ‹¨κ³„: μ‚¬μ§„ λ“±λ΅
```
μ‚¬μ©μ β†’ /add νμ΄μ§€
     β†’ μ‚¬μ§„ μ΄¬μ/μ„ νƒ
     β†’ μλ™ μ λ© μƒμ„±
     β†’ [μ €μ¥] λ²„νΌ ν΄λ¦­
     β†’ POST /meal-records
        {
          name: "10μ›” 9μΌ μ €λ…",
          photos: [File, File, ...]
        }
     β†’ DB μ €μ¥ (rating=null)
     β†’ /feedλ΅ λ¦¬λ‹¤μ΄λ ‰νΈ
```

### 2λ‹¨κ³„: ν‰κ°€ μ¶”κ°€
```
μ‚¬μ©μ β†’ /feedμ—μ„ μΉ΄λ“ ν΄λ¦­
     β†’ /meal/[id] μƒμ„Έ νμ΄μ§€
     β†’ [ν‰κ°€ν•κΈ°] λ²„νΌ ν΄λ¦­
     β†’ /meal/[id]/evaluate νμ΄μ§€
     β†’ ν‰μ , μ¥μ†, κ°€κ²©, λ©”λ¨ μ…λ ¥
     β†’ [ν‰κ°€ μ €μ¥ν•κΈ°] λ²„νΌ ν΄λ¦­
     β†’ PATCH /meal-records/[id]
        {
          rating: 5,
          location: "ν™λ€ μ΄νƒλ¦¬μ•",
          price: 18000,
          memo: "μ •λ§ λ§›μμ—μ–΄μ”!"
        }
     β†’ DB μ—…λ°μ΄νΈ
     β†’ /meal/[id]λ΅ λ¦¬λ‹¤μ΄λ ‰νΈ
```

### μμ • νλ¦„
```
μ‚¬μ©μ β†’ /meal/[id] μƒμ„Έ νμ΄μ§€
     β†’ [ν‰κ°€ μμ •ν•κΈ°] λ²„νΌ ν΄λ¦­
     β†’ /meal/[id]/evaluate νμ΄μ§€
     β†’ κΈ°μ΅΄ λ°μ΄ν„° λ΅λ“ λ° ν‘μ‹
     β†’ μμ • ν›„ μ €μ¥
     β†’ PATCH /meal-records/[id]
     β†’ /meal/[id]λ΅ λ¦¬λ‹¤μ΄λ ‰νΈ
```

## π“± μ‚¬μ©μ μ‹λ‚λ¦¬μ¤

### μ‹λ‚λ¦¬μ¤ 1: λ°”μ μ μ‹¬ μ‹κ°„
```
1. μμ‹μ΄ λ‚μ΄ β†’ μ¬λΉ¨λ¦¬ μ‚¬μ§„ μ΄¬μ π“Έ
2. [μ €μ¥] λ²„νΌλ§ ν΄λ¦­
3. μ‹μ‚¬ μ‹μ‘ π½οΈ
4. (λ‚μ¤‘μ—) μ—¬μ μμ„ λ• ν‰κ°€ μ¶”κ°€
```

### μ‹λ‚λ¦¬μ¤ 2: μ—¬μ λ΅μ΄ μ €λ…
```
1. μμ‹ μ‚¬μ§„ μ΄¬μ π“Έ
2. [μ €μ¥] λ²„νΌ ν΄λ¦­
3. μ‹μ‚¬ μ™„λ£ ν›„ μ¦‰μ‹ ν‰κ°€
4. λ³„μ , λ©”λ¨ μ‘μ„±
```

### μ‹λ‚λ¦¬μ¤ 3: κ³Όκ±° κΈ°λ΅ μ •λ¦¬
```
1. ν”Όλ“μ—μ„ "λ―Έν‰κ°€" κΈ°λ΅ ν™•μΈ
2. κΈ°μ–µμ„ λμ‚΄λ ¤ ν‰κ°€ μ¶”κ°€
3. ν†µκ³„ λ°μ΄ν„° μ •ν™•λ„ ν–¥μƒ
```

## π¨ UI/UX κ°μ„ μ‚¬ν•­

### λ“±λ΅ νμ΄μ§€
- β… μ‹¬ν”ν• μΈν„°νμ΄μ¤ (ν•„μλ§ ν‘μ‹)
- β… ν° μ‚¬μ§„ μ—…λ΅λ“ μμ—­
- β… μλ™ μ λ©μΌλ΅ μ…λ ¥ λ¶€λ‹΄ κ°μ†
- β… λ…ν™•ν• μ•λ‚΄ λ©”μ‹μ§€

### ν‰κ°€ νμ΄μ§€
- β… μ‹μ‚¬ μ •λ³΄ λ―Έλ¦¬λ³΄κΈ° (μƒλ‹¨)
- β… ν° λ³„μ  μ„ νƒ μμ—­
- β… μ΄λ¨μ§€ ν”Όλ“λ°±μΌλ΅ μ§κ΄€μ„± ν–¥μƒ
- β… GPS μ„μΉ μλ™ μ…λ ¥
- β… μ—­μ§€μ¤μ½”λ”©μΌλ΅ μ£Όμ† ν‘μ‹

### μƒμ„Έ νμ΄μ§€
- β… ν‰κ°€ μƒνƒ λ…ν™•ν κµ¬λ¶„
- β… λ―Έν‰κ°€μ‹ CTA λ²„νΌ κ°•μ΅°
- β… μ‚¬μ§„ κ°¤λ¬λ¦¬ μ§€μ›
- β… κΉ”λ”ν• μ •λ³΄ λ μ΄μ•„μ›ƒ

## π“ ν†µκ³„ λ° μν–¥

### μμƒ ν¨κ³Ό
1. **μ‚¬μ©μ λ“±λ΅ μ™„λ£μ¨ μ¦κ°€**
   - κΈ°μ΅΄: ~60% (λ³µμ΅ν• νΌμΌλ΅ μ΄νƒ)
   - κ°μ„ : ~90% (μ‚¬μ§„λ§ μμΌλ©΄ μ™„λ£)

2. **ν‰κ°€ μ°Έμ—¬μ¨**
   - μ¦‰μ‹ ν‰κ°€: ~40%
   - λ‚μ¤‘μ— ν‰κ°€: ~30%
   - μ΄ ν‰κ°€μ¨: ~70%

3. **ν‰κ·  λ“±λ΅ μ‹κ°„**
   - κΈ°μ΅΄: ~2λ¶„ (λ¨λ“  μ •λ³΄ μ…λ ¥)
   - κ°μ„ : ~30μ΄ (μ‚¬μ§„λ§ μ΄¬μ)

### λ°μ΄ν„° ν’μ§
- λ―Έν‰κ°€ κΈ°λ΅λ„ κ°€μΉ μλ” λ°μ΄ν„°
- μ‚¬μ§„ μμ²΄κ°€ μ‹μµκ΄€ κΈ°λ΅
- λ‚μ¤‘μ—λΌλ„ ν‰κ°€ μ¶”κ°€ κ°€λ¥

## π”§ κΈ°μ  κµ¬ν„

### Backend λ³€κ²½ (μµμ†)
```typescript
// Entity: ratingμ„ nullableλ΅ λ³€κ²½
@Column('int', { nullable: true })
rating: number;

// DTO: ratingμ„ optionalλ΅ λ³€κ²½
@IsOptional()
@IsNumber()
rating?: number;
```

### Frontend λ³€κ²½ (λ€κ·λ¨)
```
β… /add νμ΄μ§€ μ™„μ „ μ¬μ‘μ„±
β… /meal/[id]/evaluate νμ΄μ§€ μ‹ κ· μƒμ„±
β… /meal/[id] νμ΄μ§€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ΅ μ „ν™
β… meal-card μ»΄ν¬λ„νΈ λ―Έν‰κ°€ μƒνƒ μ²λ¦¬
β… νƒ€μ… μ •μ μ—…λ°μ΄νΈ
```

## π€ λ°°ν¬ κ°€μ΄λ“

### 1. λ°±μ—”λ“ λ°°ν¬
```bash
cd backend
npm run build
pm2 restart dailymeal-backend
```

### 2. ν”„λ΅ νΈμ—”λ“ λ°°ν¬
```bash
cd frontend
npm run build
pm2 restart dailymeal-frontend
```

### 3. ν™•μΈμ‚¬ν•­
- [ ] μ‚¬μ§„ μ—…λ΅λ“ μ •μƒ μ‘λ™
- [ ] μλ™ μ λ© μƒμ„± ν™•μΈ
- [ ] λ―Έν‰κ°€ μƒνƒ ν‘μ‹
- [ ] ν‰κ°€ νμ΄μ§€ μ ‘κ·Ό
- [ ] ν‰κ°€ μ €μ¥ λ° μμ •
- [ ] μΉ΄λ“μ—μ„ λ―Έν‰κ°€ ν‘μ‹

## π“ ν–¥ν›„ κ°μ„  μ‚¬ν•­

### λ‹¨κΈ° (1-2μ£Ό)
1. **ν‰κ°€ μ•λ¦Ό**
   - λ―Έν‰κ°€ κΈ°λ΅ 3κ° μ΄μƒμ‹ μ•λ¦Ό
   - "ν‰κ°€ν•μ§€ μ•μ€ μ‹μ‚¬κ°€ μμ–΄μ”!" λ°°λ„

2. **μΌκ΄„ ν‰κ°€**
   - λ―Έν‰κ°€ λ©λ΅ νμ΄μ§€
   - μ¤μ™€μ΄ν”„λ΅ λΉ λ¥Έ ν‰κ°€

### μ¤‘κΈ° (1κ°μ›”)
1. **AI μλ™ ν‰κ°€**
   - μ‚¬μ§„ λ¶„μ„μΌλ΅ μμ‹ μΆ…λ¥ μλ™ μΈμ‹
   - κ³Όκ±° ν‰κ°€ ν¨ν„΄ ν•™μµ
   - μ¶”μ² ν‰μ  μ μ‹

2. **μμ„± λ©”λ¨**
   - μ‹μ‚¬ μ¤‘ μμ„±μΌλ΅ λ©”λ¨
   - STTλ΅ ν…μ¤νΈ λ³€ν™

### μ¥κΈ° (3κ°μ›”)
1. **μ†μ… κΈ°λ¥ κ°•ν™”**
   - μΉκµ¬μ λ―Έν‰κ°€ κΈ°λ΅ λ¦¬λ§μΈλ“
   - ν•¨κ» ν‰κ°€ν•κΈ°

2. **κ²μ΄λ―Έν”ΌμΌ€μ΄μ…**
   - ν‰κ°€ μ™„λ£μ‹ ν¬μΈνΈ μ λ¦½
   - μ—°μ† ν‰κ°€ μ¤νΈλ¦­

## π”— κ΄€λ ¨ νμΌ

### μ‹ κ· νμΌ
- `frontend/src/app/add/page.tsx` (μ™„μ „ μ¬μ‘μ„±)
- `frontend/src/app/meal/[id]/evaluate/page.tsx` (μ‹ κ·)
- `frontend/src/app/meal/[id]/page.tsx` (ν΄λΌμ΄μ–ΈνΈλ΅ μ „ν™)

### λ°±μ—… νμΌ
- `frontend/src/app/add/page_old.tsx`
- `frontend/src/app/meal/[id]/page_server.tsx`

### μμ • νμΌ
- `frontend/src/components/meal-card.tsx`
- `frontend/src/types/index.ts`
- `backend/src/entities/meal-record.entity.ts`
- `backend/src/dto/meal-record.dto.ts`

## π“ κ΄€λ ¨ λ¬Έμ„
- [ν‰κ°€ μ‹μ¤ν… μ—…λ°μ΄νΈ](./RATING_OPTIONAL_UPDATE.md)
- [λ°μ΄ν„°λ² μ΄μ¤ λ¬Έμ„](./DATABASE.md)
- [μ‚¬μ©μ μ‹λ‚λ¦¬μ¤](./SCENARIOS.md)
