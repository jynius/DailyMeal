# DailyMeal API μ‚¬μ© ν„ν™© λ° λ¨λ‹ν„°λ§ κ³„ν

## π“ Frontend API μ‚¬μ© ν„ν™©

### 1. μΈμ¦ API (`/auth/*`)
**νμΌ**: `frontend/src/lib/api/client.ts`

| μ—”λ“ν¬μΈνΈ | λ©”μ„λ“ | μ‚¬μ©μ² | λΉλ„ |
|-----------|--------|--------|------|
| `/auth/register` | POST | νμ›κ°€μ… | λ‚®μ |
| `/auth/login` | POST | λ΅κ·ΈμΈ | μ¤‘κ°„ |

**μ‚¬μ© μ»΄ν¬λ„νΈ**:
- `components/auth/auth-form.tsx`
- `app/login/page.tsx`
- `app/signup/page.tsx`

---

### 2. μ‹μ‚¬ κΈ°λ΅ API (`/meal-records/*`)
**νμΌ**: `frontend/src/lib/api/client.ts`

| μ—”λ“ν¬μΈνΈ | λ©”μ„λ“ | μ‚¬μ©μ² | λΉλ„ | μ¤‘μ”λ„ |
|-----------|--------|--------|------|--------|
| `/meal-records` | POST | μ‹μ‚¬ λ“±λ΅ | λ†’μ | β­β­β­ |
| `/meal-records` | GET | λ©λ΅ μ΅°ν | λ§¤μ°λ†’μ | β­β­β­β­ |
| `/meal-records/:id` | GET | μƒμ„Έ μ΅°ν | λ†’μ | β­β­β­ |
| `/meal-records/:id` | PATCH | μ‹μ‚¬ μμ • | μ¤‘κ°„ | β­β­ |
| `/meal-records/:id` | DELETE | μ‹μ‚¬ μ‚­μ  | λ‚®μ | β­β­ |
| `/meal-records/search` | GET | κ²€μƒ‰ | μ¤‘κ°„ | β­β­β­ |
| `/meal-records/statistics` | GET | ν†µκ³„ | λ‚®μ | β­β­ |
| `/meal-records/locations/frequent` | GET | μμ£Όκ°€λ” μ¥μ† | μ¤‘κ°„ | β­β­ |

**μ‚¬μ© μ»΄ν¬λ„νΈ**:
- `app/feed/page.tsx` (λ©λ΅ μ΅°ν - λ§¤μ° λΉλ²)
- `app/add/page.tsx` (λ“±λ΅)
- `app/meal/[id]/page.tsx` (μƒμ„Έ)
- `components/meal-card.tsx` (μ‚­μ )
- `components/evaluate-modal.tsx` (μμ •, ν‰κ°€)

---

### 3. μ‚¬μ©μ/ν”„λ΅ν•„ API (`/users/*`)
**νμΌ**: `frontend/src/lib/api/profile.ts`

| μ—”λ“ν¬μΈνΈ | λ©”μ„λ“ | μ‚¬μ©μ² | λΉλ„ |
|-----------|--------|--------|------|
| `/users/me` | GET | ν”„λ΅ν•„ μ΅°ν | λ†’μ |
| `/users/me` | PATCH | ν”„λ΅ν•„ μμ • | λ‚®μ |
| `/users/me/profile-image` | POST | μ΄λ―Έμ§€ μ—…λ΅λ“ | λ‚®μ |
| `/users/me/statistics` | GET | ν†µκ³„ μ΅°ν | λ‚®μ |
| `/users/me/settings` | GET | μ„¤μ • μ΅°ν | λ‚®μ |
| `/users/me/settings` | PATCH | μ„¤μ • μμ • | λ‚®μ |

**μ‚¬μ© μ»΄ν¬λ„νΈ**:
- `app/profile/page.tsx`
- `app/settings/page.tsx`
- `app/statistics/page.tsx`

---

### 4. μΉκµ¬ API (`/friends/*`)
**νμΌ**: `frontend/src/lib/api/friends.ts`

| μ—”λ“ν¬μΈνΈ | λ©”μ„λ“ | μ‚¬μ©μ² | λΉλ„ |
|-----------|--------|--------|------|
| `/friends` | GET | μΉκµ¬ λ©λ΅ | μ¤‘κ°„ |
| `/friends/search` | GET | μ‚¬μ©μ κ²€μƒ‰ | μ¤‘κ°„ |
| `/friends/request` | POST | μΉκµ¬ μ”μ²­ | λ‚®μ |
| `/friends/requests/received` | GET | λ°›μ€ μ”μ²­ | λ‚®μ |
| `/friends/requests/sent` | GET | λ³΄λ‚Έ μ”μ²­ | λ‚®μ |
| `/friends/:id/accept` | POST | μ”μ²­ μλ½ | λ‚®μ |
| `/friends/:id/reject` | POST | μ”μ²­ κ±°μ  | λ‚®μ |
| `/friends/:friendId` | DELETE | μΉκµ¬ μ‚­μ  | λ‚®μ |
| `/friends/:friendId/notification` | PATCH | μ•λ¦Ό μ„¤μ • | λ‚®μ |

**μ‚¬μ© μ»΄ν¬λ„νΈ**:
- `app/users/page.tsx`
- `components/evaluate-modal.tsx` (μΉκµ¬ μ„ νƒ)

---

### 5. κ³µμ  API (`/share/*`)
**νμΌ**: `frontend/src/lib/api/share.ts`

| μ—”λ“ν¬μΈνΈ | λ©”μ„λ“ | μ‚¬μ©μ² | λΉλ„ |
|-----------|--------|--------|------|
| `/share/create` | POST | κ³µμ  λ§ν¬ μƒμ„± | μ¤‘κ°„ |
| `/share/meal/:shareId` | GET | κ³µμ  μ΅°ν (λΉ„μΈμ¦) | λ†’μ |
| `/share/track-view` | POST | μ΅°ν μ¶”μ  | λ†’μ |
| `/share/connect-friend` | POST | μΉκµ¬ μ—°κ²° | λ‚®μ |
| `/share/my-stats` | GET | κ³µμ  ν†µκ³„ | λ‚®μ |

**μ‚¬μ© μ»΄ν¬λ„νΈ**:
- `components/meal-card.tsx`
- `app/meal/[id]/page.tsx`
- `app/share/meal/[shareId]/page.tsx`
- `components/share-modal.tsx`

---

### 6. κΈ°νƒ€ API
**νμΌ**: `backend/src/app.controller.ts`

| μ—”λ“ν¬μΈνΈ | λ©”μ„λ“ | μ‚¬μ©μ² | λΉλ„ |
|-----------|--------|--------|------|
| `/geocode/reverse` | GET | μ—­μ§€μ¤μ½”λ”© | μ¤‘κ°„ |
| `/restaurants` | GET | μμ‹μ  κ²€μƒ‰ | μ¤‘κ°„ |

---

## π― μ„±λ¥ λ¨λ‹ν„°λ§μ΄ ν•„μ”ν• ν•µμ‹¬ API (μ°μ„ μμ„)

### μµμ°μ„  (P0)
1. **`GET /meal-records`** - ν”Όλ“ λ©λ΅ (κ°€μ¥ λΉλ²)
2. **`POST /meal-records`** - μ‹μ‚¬ λ“±λ΅ (νμΌ μ—…λ΅λ“ ν¬ν•¨)
3. **`GET /meal-records/:id`** - μ‹μ‚¬ μƒμ„Έ

### λ†’μ (P1)
4. **`GET /share/meal/:shareId`** - κ³µμ  μ΅°ν
5. **`GET /meal-records/search`** - κ²€μƒ‰
6. **`GET /users/me`** - ν”„λ΅ν•„ μ΅°ν

---

## π› οΈ μ μ•ν•λ” λ¨λ‹ν„°λ§ μ‹μ¤ν…

### μµμ… 1: μ»¤μ¤ν…€ μΈν„°μ…‰ν„° (κ°€λ²Όμ΄ λ°©λ²•) β… μ¶”μ²
**μ¥μ **:
- λΉ λ¥Έ κµ¬ν„
- μμ΅΄μ„± μ—†μ
- λ΅κ·Έ κΈ°λ° λ¶„μ„

**κΈ°λ¥**:
- API μ‘λ‹µ μ‹κ°„ μΈ΅μ •
- μ—λ¬μ¨ μ¶”μ 
- λλ¦° API κ²½κ³ 
- λ΅κ·Έ νμΌ κΈ°λ΅

### μµμ… 2: APM λ„κµ¬ μ—°λ™ (μ „λ¬Έμ  λ°©λ²•)
**μ¶”μ² λ„κµ¬**:
- **Sentry** (μ—λ¬ μ¶”μ  + μ„±λ¥)
- **New Relic** (APM)
- **Datadog** (μΆ…ν•© λ¨λ‹ν„°λ§)

**μ¥μ **:
- μ „λ¬Έμ μΈ λ€μ‹λ³΄λ“
- μ‹¤μ‹κ°„ μ•λ¦Ό
- μλ™ λ¶„μ„

**λ‹¨μ **:
- λΉ„μ© λ°μƒ (λ¬΄λ£ ν”λ μ ν•)
- μ„¤μ • ν•„μ”

### μµμ… 3: ν•μ΄λΈλ¦¬λ“
- μ»¤μ¤ν…€ μΈν„°μ…‰ν„°λ΅ κΈ°λ³Έ λ¨λ‹ν„°λ§
- ν”„λ΅λ•μ…μ—μ„λ” Sentry μ—°λ™

---

## π“ λ¨λ‹ν„°λ§ λ©”νΈλ¦­

### 1. μ‘λ‹µ μ‹κ°„
- ν‰κ·  μ‘λ‹µ μ‹κ°„
- P95, P99 μ‘λ‹µ μ‹κ°„
- λλ¦° API (>1μ΄)

### 2. μ—λ¬μ¨
- HTTP 4xx (ν΄λΌμ΄μ–ΈνΈ μ—λ¬)
- HTTP 5xx (μ„λ²„ μ—λ¬)
- λ„¤νΈμ›ν¬ μ—λ¬

### 3. μ‚¬μ©λ‰
- API νΈμ¶ νμ
- μ—”λ“ν¬μΈνΈλ³„ νΈμ¶ λΉλ„

### 4. μ‚¬μ©μ κ²½ν—
- νƒ€μ„μ•„μ›ƒ λ°μƒλ¥ 
- μ¬μ‹λ„ νμ

---

## π€ κµ¬ν„ κ³„ν

### Phase 1: κΈ°λ³Έ λ¨λ‹ν„°λ§ (μ»¤μ¤ν…€ μΈν„°μ…‰ν„°)
1. β… API μΈν„°μ…‰ν„° μƒμ„±
2. β… μ„±λ¥ λ΅κ±° μ¶”κ°€
3. β… λ€μ‹λ³΄λ“ νμ΄μ§€ μƒμ„± (μ„ νƒ)

### Phase 2: ν–¥μƒλ λ¨λ‹ν„°λ§
1. β³ Sentry μ—°λ™ (μ—λ¬ μ¶”μ )
2. β³ μ•λ¦Ό μ‹μ¤ν…
3. β³ μ„±λ¥ κ°μ„  μλ™ν™”

---

## π’΅ μ¦‰μ‹ μ μ© κ°€λ¥ν• κ°μ„ μ‚¬ν•­

### Frontend
1. **API μ”μ²­ μ¤‘λ³µ μ κ±°** (React Query/SWR λ„μ…)
2. **μΊμ‹± μ „λµ** (μμ£Ό μ΅°νλλ” λ°μ΄ν„°)
3. **λ‚™κ΄€μ  μ—…λ°μ΄νΈ** (UX κ°μ„ )
4. **μ”μ²­ λ””λ°”μ΄μ‹±** (κ²€μƒ‰)

### Backend
1. **DB μΏΌλ¦¬ μµμ ν™”** (N+1 λ¬Έμ  ν•΄κ²°)
2. **μΊμ‹±** (Redis)
3. **νμ΄μ§€λ„¤μ΄μ… κ°μ„ **
4. **μ••μ¶•** (gzip)

---

**μ‘μ„±μΌ**: 2025-10-10  
**λ‹¤μ λ‹¨κ³„**: μ»¤μ¤ν…€ API λ¨λ‹ν„°λ§ μΈν„°μ…‰ν„° κµ¬ν„
